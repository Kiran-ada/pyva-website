{% extends "base.html" %}

{% block content %}
<!-- Contact Hero -->
<section class="contact-hero">
    <div class="container">
        <h1>Contact <span style="color: var(--orange);">Us</span></h1>
        <p>Book a Free Demo ‚Ä¢ Get Personalized Guidance</p>
    </div>
</section>

<!-- Contact Main - Two Column Layout -->
<section class="contact-main">
    <div class="container">
        <div class="contact-grid">
            <!-- LEFT: Beautiful Background + Images -->
            <div class="contact-left">
                <div class="abstract-bg">
                    <div class="circle-pattern c1"></div>
                    <div class="circle-pattern c2"></div>
                    <div class="circle-pattern c3"></div>
                    <div class="circle-pattern c4"></div>
                </div>
                
                <div class="student-images">
                    <div class="student-img s1"></div>
                    <div class="student-img s2"></div>
                    <div class="student-img s3"></div>
                </div>
                
                <div class="contact-info">
                    <h3>Ready to Start?</h3>
                    <p>Book a free 30-min demo with our experts</p>
                    <div class="contact-details">
                        <div class="detail-item">
                            <i class="fas fa-phone"></i>
                            <div>
                                <strong>+91 9381874845</strong>
                                <span>Call Anytime</span>
                            </div>
                            <br>
                            <div>
                                <strong>+91 9381874845</strong>
                                <span>Call Anytime</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <strong>pyvacourse@gmail.com</strong>
                                <span>24hrs Response</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT: Professional Contact Form -->
            <div class="contact-right">
                <div class="form-container">
                    <h3>Book Free Demo</h3>
                    <p>Fill details for personalized course recommendation</p>
                    
                    <form id="demoForm" class="contact-form">
                        <div class="form-row">
                            <input type="text" name="name" placeholder="Full Name *" required>
                            <br>
                            <input type="tel" name="phone" placeholder="Phone Number *" required pattern="[0-9]{10}" title="Enter 10 digit mobile number">
                        </div>
                        <input type="email" name="email" placeholder="Email Address *" required>
                        
                        <select name="degree" required>
                            <option value="">Select Degree *</option>
                            <option value="undergraduate">Under Graduate (B.Tech/B.Sc)</option>
                            <option value="graduate">Graduate (Completed Degree)</option>
                            <option value="postgraduate">Post Graduate (M.Tech/MBA)</option>
                            <option value="working">Working Professional</option>
                            <option value="other">Other</option>
                        </select>
                        
                        <select name="course" required>
                            <option value="">Preferred Course *</option>
                            <option value="python"> Python Full Stack</option>
                            <option value="java"> Java Full Stack</option>
                            <option value="devops"> DevOps & Cloud</option>
                            <option value="web"> Web Development</option>
                            <option value="frontend"> Frontend (React)</option>
                            <option value="backend"> Backend Development</option>
                            <option value="data"> Data Analysis</option>
                            <option value="dbms"> DBMS (SQL/MongoDB)</option>
                            <option value="digital"> Digital Marketing</option>
                            <option value="communication"> Communication Skills</option>
                            <option value="nonit"> Non-IT Skills</option>
                        </select>
                        
                        <textarea name="message" rows="4" placeholder="Any Questions? (Optional)"></textarea>
                        
                        <button type="submit" class="btn btn-primary btn-large demo-btn">
                            <i class="fas fa-calendar-check"></i> Book Free Demo
                        </button>
                    </form>
                    
                    <div id="formStatus" class="form-status"></div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.contact-hero {
    padding: 140px 0 80px;
    background: linear-gradient(135deg, #ff6200 0%, #ff8c42 100%);
    color: white;
    text-align: center;
}

.contact-hero h1 { font-size: 3.5rem; font-weight: 800; margin-bottom: 16px; }

.contact-main { padding: 120px 0; background: #f8fafc; }

.contact-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
}

.contact-left { position: relative; height: 600px; }

.abstract-bg {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: 30px;
    background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);
    overflow: hidden;
}

.circle-pattern {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,98,0,0.2) 0%, transparent 70%);
}

.c1 { width: 200px; height: 200px; top: 20%; left: 10%; animation: float 6s ease-in-out infinite; }
.c2 { width: 150px; height: 150px; top: 60%; right: 20%; animation: float 8s ease-in-out infinite reverse; }
.c3 { width: 100px; height: 100px; top: 10%; right: 10%; animation: float 10s ease-in-out infinite; }
.c4 { width: 80px; height: 80px; bottom: 20%; left: 20%; animation: float 7s ease-in-out infinite reverse; }

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

.student-images {
    position: relative;
    z-index: 2;
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: 30px;
    padding: 60px;
}

.student-img {
    border-radius: 50%;
    box-shadow: 0 25px 60px rgba(0,0,0,0.15);
    border: 6px solid white;
    background: linear-gradient(135deg, #f3f7f7);
    transition: all 0.4s ease;
}

.student-img:hover {
    transform: scale(1.05) rotate(2deg);
    box-shadow: 0 35px 80px rgba(0,0,0,0.25);
}

.s1 { width: 140px; height: 140px; align-self: flex-end; }
.s2 { width: 160px; height: 160px; align-self: center; }
.s3 { width: 120px; height: 120px; align-self: flex-start; }

.contact-info {
    position: absolute;
    bottom: 60px;
    left: 60px;
    right: 60px;
    background: white;
    padding: 40px;
    border-radius: 24px;
    box-shadow: 0 30px 80px rgba(0,0,0,0.15);
    z-index: 3;
    text-align: center;
}

.contact-info h3 { font-size: 2rem; margin-bottom: 16px; color: var(--dark); }

.contact-info p { color: var(--gray); margin-bottom: 32px; font-size: 1.1rem; }

.detail-item {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
}

.detail-item i {
    width: 50px; height: 50px;
    background: linear-gradient(135deg, var(--orange), #ff8c42);
    color: white;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
}

.contact-right { display: flex; align-items: center; justify-content: center; }

.form-container {
    background: white;
    padding: 60px;
    border-radius: 30px;
    box-shadow: 0 30px 80px rgba(0,0,0,0.15);
    width: 100%;
    max-width: 500px;
}

.form-container h3 { font-size: 2.2rem; margin-bottom: 12px; text-align: center; color: var(--dark); }

.form-container p { color: var(--gray); text-align: center; margin-bottom: 40px; font-size: 1.1rem; }

.contact-form { display: flex; flex-direction: column; gap: 24px; }

.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

.contact-form input,
.contact-form select,
.contact-form textarea {
    padding: 18px 24px;
    border: 2px solid #e5e7eb;
    border-radius: 16px;
    font-size: 1rem;
    transition: all 0.3s ease;
    font-family: inherit;
}

.contact-form input:focus,
.contact-form select:focus,
.contact-form textarea:focus {
    outline: none;
    border-color: var(--orange);
    box-shadow: 0 0 0 4px rgba(255,98,0,0.1);
}

.contact-form textarea { resize: vertical; min-height: 120px; }

.demo-btn {
    padding: 20px;
    font-size: 1.1rem;
    font-weight: 700;
    border-radius: 20px;
    gap: 12px;
    cursor: pointer;
    border: none;
}

.demo-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 40px rgba(255,98,0,0.4);
}

.demo-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.form-status {
    margin-top: 24px;
    padding: 16px;
    border-radius: 12px;
    text-align: center;
    font-weight: 600;
    display: none;
}

.form-status.show {
    display: block;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.success {
    background: rgba(16,185,129,0.1);
    color: #10b981;
    border: 2px solid #10b981;
}

.error {
    background: rgba(239,68,68,0.1);
    color: #ef4444;
    border: 2px solid #ef4444;
}

.loading {
    background: rgba(59,130,246,0.1);
    color: #3b82f6;
    border: 2px solid #3b82f6;
}

@media (max-width: 768px) {
    .contact-grid { grid-template-columns: 1fr; gap: 60px; }
    .contact-left { height: 500px; }
    .student-images { padding: 40px 30px; gap: 20px; }
    .form-container { padding: 40px 30px; }
    .form-row { grid-template-columns: 1fr; }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
/* ADMIN CONFIGURATION - CHANGE THESE VALUES*/
const ADMIN_CONFIG = {
    // üìß Email Addresses (Will receive email notifications)
    EMAIL_PRIMARY: 'pyvacourse@gmail.com ',        // ‚Üê YOUR PRIMARY EMAIL
                 // ‚Üê YOUR SECONDARY EMAIL (optional)
    
    // üì± Phone Numbers (Will receive WhatsApp alerts)
    PHONE_PRIMARY: '+91 9381874845',                  // ‚Üê YOUR PHONE (format: - no + or spaces)
                  // ‚Üê SECOND PHONE (optional)
    
    // üè¢ Company Details
    COMPANY_NAME: 'PYVA Training ',
    WEBSITE: 'https://pyva.com'
};

/*  AUTOMATIC NOTIFICATION SYSTEM*/
document.getElementById('demoForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = new FormData(this);
    const data = {
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        degree: formData.get('degree'),
        course: formData.get('course'),
        message: formData.get('message') || 'No message'
    };
    
    const statusDiv = document.getElementById('formStatus');
    const submitBtn = this.querySelector('button[type="submit"]');
    
    // Show loading state
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    statusDiv.className = 'form-status loading show';
    statusDiv.innerHTML = ' Sending notifications to admin...';
    
    try {
        // Get current date/time
        const now = new Date();
        const timestamp = now.toLocaleString('en-IN', {
            timeZone: 'Asia/Kolkata',
            dateStyle: 'full',
            timeStyle: 'short'
        });
        
        // Course name mapping
        const courseNames = {
            'python': 'Python Full Stack',
            'java': 'Java Full Stack',
            'devops': 'DevOps & Cloud',
            'web': 'Web Development',
            'frontend': 'Frontend (React)',
            'backend': 'Backend Development',
            'data': 'Data Analysis',
            'dbms': 'DBMS',
            'digital': 'Digital Marketing',
            'communication': 'Communication Skills',
            'nonit': 'Non-IT Skills'
        };
        
        const courseName = courseNames[data.course] || data.course;
        
        /*  EMAIL NOTIFICATIONS*/
        
        // Primary Admin Email
        const emailSubject1 = ` NEW DEMO BOOKING - ${data.name}`;
        const emailBody1 = `
 NEW STUDENT DEMO BOOKING!

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ STUDENT DETAILS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

 Name: ${data.name}
üìû Phone: ${data.phone}
üìß Email: ${data.email}
üéì Education: ${data.degree}
üìö Interested Course: ${courseName}
üí¨ Message: ${data.message}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚è∞ BOOKING TIME
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${timestamp}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
 ACTION REQUIRED
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
CALL STUDENT IMMEDIATELY!
üìû Contact: ${data.phone}
üìß Email: ${data.email}


${ADMIN_CONFIG.COMPANY_NAME}
${ADMIN_CONFIG.WEBSITE}

        `;
        
        // Secondary Email (shorter version)
        const emailSubject2 = `üìö Demo Request - ${courseName}`;
        const emailBody2 = `
New Demo Booking Alert!

Student: ${data.name}
Phone: ${data.phone}
Course: ${courseName}
Time: ${timestamp}

Quick action needed!
${ADMIN_CONFIG.COMPANY_NAME}
        `;
        
        /*  WHATSAPP NOTIFICATIONS */
        
        // Primary WhatsApp Alert
        const whatsappMsg1 = `üö® *NEW DEMO BOOKING*

üë§ *${data.name}*
üìû ${data.phone}
üìö ${courseName}
üéì ${data.degree}

‚è∞ ${timestamp}

*CALL NOW!* üî•

_${ADMIN_CONFIG.COMPANY_NAME}_`;
        
        // Secondary WhatsApp Alert (shorter)
        const whatsappMsg2 = `üìö *Demo Request*

${data.name} - ${courseName}
üìû ${data.phone}

${ADMIN_CONFIG.COMPANY_NAME}`;
        
        /* SEND ALL NOTIFICATIONS*/
        
        // Open email clients
        window.open(`mailto:${ADMIN_CONFIG.EMAIL_PRIMARY}?subject=${encodeURIComponent(emailSubject1)}&body=${encodeURIComponent(emailBody1)}`, '_blank');
        
        if (ADMIN_CONFIG.EMAIL_SECONDARY && ADMIN_CONFIG.EMAIL_SECONDARY !== '') {
            setTimeout(() => {
                window.open(`mailto:${ADMIN_CONFIG.EMAIL_SECONDARY}?subject=${encodeURIComponent(emailSubject2)}&body=${encodeURIComponent(emailBody2)}`, '_blank');
            }, 500);
        }
        
        // Open WhatsApp
        setTimeout(() => {
            window.open(`https://wa.me/${ADMIN_CONFIG.PHONE_PRIMARY}?text=${encodeURIComponent(whatsappMsg1)}`, '_blank');
        }, 1000);
        
        if (ADMIN_CONFIG.PHONE_SECONDARY && ADMIN_CONFIG.PHONE_SECONDARY !== '') {
            setTimeout(() => {
                window.open(`https://wa.me/${ADMIN_CONFIG.PHONE_SECONDARY}?text=${encodeURIComponent(whatsappMsg2)}`, '_blank');
            }, 1500);
        }
        
        /*SUCCESS MESSAGE */
        
        // Show success message
        setTimeout(() => {
            statusDiv.className = 'form-status success show';
            statusDiv.innerHTML = `
                ‚úÖ <strong>Demo Booked Successfully!</strong><br><br>
                üìß Email sent to admin<br>
                üí¨ WhatsApp alert sent<br>
                üìû Our expert will call you within 2 hours!<br><br>
                <small>Booking ID: PYVA${Date.now()}</small>
            `;
            
            // Reset form
            this.reset();
            
            // Re-enable button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-calendar-check"></i> Book Free Demo';
            
            // Hide success message after 10 seconds
            setTimeout(() => {
                statusDiv.classList.remove('show');
            }, 10000);
            
        }, 2000);
        
    } catch (error) {
        console.error('Error:', error);
        
        // Show error message
        statusDiv.className = 'form-status error show';
        statusDiv.innerHTML = `
            ‚ùå <strong>Something went wrong!</strong><br><br>
            Please call us directly:<br>
            üìû <strong>+91 ${ADMIN_CONFIG.PHONE_PRIMARY.slice(2)}</strong><br>
            üìß <strong>${ADMIN_CONFIG.EMAIL_PRIMARY}</strong>
        `;
        
        // Re-enable button
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-calendar-check"></i> Book Free Demo';
    }
});

/* PHONE NUMBER VALIDATION */
document.querySelector('input[name="phone"]').addEventListener('input', function(e) {
    // Only allow numbers
    this.value = this.value.replace(/[^0-9]/g, '');
    
    // Limit to 10 digits
    if (this.value.length > 10) {
        this.value = this.value.slice(0, 10);
    }
});
</script>
{% endblock %}